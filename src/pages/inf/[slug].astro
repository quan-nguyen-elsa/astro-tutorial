---
import Layout from '@layouts/Influencer/Layout.astro';
import { fetchStrapiGraphQL } from '../../lib/strapi';
import type { InfluencerResponse, Influencer } from '../../interfaces/influencer';
import { GET_INFLUENCERS } from '../../queries/influencer';

export async function getStaticPaths() {
  const { influencers } = await fetchStrapiGraphQL<InfluencerResponse>({ query: GET_INFLUENCERS });
  return influencers.map((influencer: Influencer) => ({
    params: { slug: influencer.slug },
    props: influencer,
  }));
};

const influencer = Astro.props;
---

<Layout template={influencer.template.slug} influencer={influencer} />
